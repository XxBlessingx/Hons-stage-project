<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>HabitIQ | Dashboard</title>
        <link rel="stylesheet" href="styles.css"/>
    </head>

    <body>
        <main class="dashboard">
            <h1 id="Welcome">Welcome</h1>
            <button id="Logout">Log out</button>
        </main>


            <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
            import {
            getAuth,
            onAuthStateChanged,
            signOut
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
        apiKey: "AIzaSyDUPdCJIpj09iUSHL4Dm_ZwbYuHzzq_SmM",
        authDomain: "habitiq-364b5.firebaseapp.com",
        projectId: "habitiq-364b5",
        storageBucket: "habitiq-364b5.firebasestorage.app",
        messagingSenderId: "825959188014",
        appId: "1:825959188014:web:ec3fc6ed82a076be4f01bf"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Used as a authticstion gaurd and set up 
        onAuthStateChanged(auth, (user) => {
            if (!user) window.location.href = "login.html";
            return
        });
            // print the users name on the dashboard 
          welcome.textContent = `Welcome, ${user.displayName || user.email}`;

        const welcome = document.getElementById("Welcome");
        const logoutBtn = document.getElementById("Logout")

        //logging out protol call 
        logoutBtn.addEventListener("click",async() => {
            await signOut(auth);
            window.location.href ="login.html";
        });
  </script>

    </body>
</html>